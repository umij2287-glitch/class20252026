<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>타이머 2</title>
</head>
<body>
    
    <button id="btn-start">타이머 시작</button>
    <button id="btn-stop">타이머 중지</button>

    <div id="message"></div>

    <script>
        
        const message = document.querySelector("#message");
        const btnStart = document.querySelector("#btn-start");
        const btnStop = document.querySelector("#btn-stop");
        
        function showTime() {

            timerId = window.setTimeout(function() {
            
                message.innerHTML = `<h3>${ new Date() }</h3>`; 
                
                if (true) {                 // 재귀 호출
                    showTime();
                }

            }, 1000);

        }

        let timerId = null;

        btnStart.addEventListener("click", event => {

            if (timerId != null) { 
                return;             // 현재 실행중인 타이머가 있다면 함수 실행을 종료
            }           

            showTime();

        });

        btnStop.addEventListener("click", event => {

            window.clearTimeout(timerId); // setTimeout 로 시작된 타이머를 중지.
            
            timerId = null;
            
        });

    </script>

</body>
</html>